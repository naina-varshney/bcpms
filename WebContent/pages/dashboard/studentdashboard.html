<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>BCPMS| StudentDashboard</title>
	<link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
	<!-- overlayScrollbars -->
	<link rel="stylesheet" href="../../plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
	<!-- style -->
	<link rel="stylesheet" href="../../dist/css/adminlte.min.css">
	<style>
		img {
			height: 540px;
		}

		.blinking {
			animation: blinkingText 2.0s infinite;
		}

		@keyframes blinkingText {
			0% {
				color: #000;
			}
			49% {
				color: blue;
			}
			60% {
				color: transparent;
			}
			99% {
				color: transparent;
			}
			100% {
				color: #000;
			}
		}

		.nav-pills .nav-link {
			color: #c2c7d0;
		}
	</style>
</head>

<body class="hold-transition sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed">
	<div class="wrapper">
		<!-- Navbar -->
		<nav class="main-header navbar navbar-expand navbar-white navbar-light">
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a></li>
				<li class="nav-item d-none d-sm-inline-block"><a href="../../pages/layout/homepage.html" class="nav-link">Home</a></li>
				<li class="nav-item d-none d-sm-inline-block">
					<div id="studentContent.html" class="nav-link active" onClick="changeContent('../../pages/layout/contactus.html')" style="cursor: pointer;"
					 class="nav-link">
						<p>Contact</p>
					</div>
				</li>
			</ul>
			<!-- Right navbar links -->
			<ul class="navbar-nav ml-auto">
				<!--mail-->
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="mailto:nainavarshney8@gmail.com"><i class="far fa-envelope" title="Mail"></i></a>
				</li>
				<!-- Notifications  -->
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="#"><i class="far fa-bell" title="Check Notifications"></i></a>
				</li>
			</ul>
		</nav>
		<!-- /.navbar -->
		<!-- Main Sidebar Container -->
		<aside class="main-sidebar sidebar-dark-primary elevation-4">
			<!-- Brand Logo -->
			<a href="index3.html" class="brand-link"> 
				<img src="../../dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
				<span class="brand-text font-weight-light">BCPMS</span>
			</a>
			<!-- Sidebar -->
			<div class="sidebar">
				<!-- Sidebar user panel (optional) -->
				<div class="user-panel mt-3 pb-3 mb-3 d-flex">
					<div class="image">
						<img src="../../dist/img/user7-128x128.jpg" class="img-circle elevation-2" alt="User Image">
					</div>
					<div class="info"><a href="#" class="d-block" id=student_name></a></div>
				</div>
				<!-- Sidebar Menu -->
				<nav class="mt-2">
					<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
						<li class="nav-item active">
							<div id="studentContent.html" class="nav-link active" onClick="changeContent('../../pages/dashboard/studentContent.html')"
							 style="cursor: pointer;" class="nav-link"><i class="nav-icon fas fa-tachometer-alt"></i>
								<p>Dashboard</p>
							</div>
						</li>
						<li class="nav-item has-treeview"><a href="#" class="nav-link"><i class="nav-icon fas fa-th"></i>
								<p>Course<i class="right fas fa-angle-left"></i></p> </a>
							<ul id="courseTypeList" class="nav nav-treeview"></ul>
						</li>
						<li id="replace1" class="nav-item">
							<div id="enroll.html" class="nav-link" onClick="changeContent('../../pages/forms/enroll.html')" style="cursor: pointer;"
							 class="nav-link"><i class="nav-icon fas fa-graduation-cap"></i>
								<p>Enroll Yourself</p>
							</div>
						</li>
						<li class="nav-item">
							<div id="resetpassword.html" class="nav-link" onClick="changeContent('../../pages/forms/resetpassword.html')" style="cursor: pointer;"
							 class="nav-link"><i class="fa fa-key nav-icon"></i>
								<p>Reset Password</p>
							</div>
						</li>
						<li class="nav-item">
							<a href="../../pages/layout/homepage.html" class="nav-link"> <i class="nav-icon fas fa-sign-out-alt"></i>
								<p>Logout</p>
							</a>
						</li>

					</ul>
				</nav>
				<!-- /.sidebar-menu -->
			</div>
			<!-- /.sidebar -->
		</aside>
		<!-- / main sidebar end  -->
		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<iframe id="mainIframe" src="" style="width: -moz-available; width: -webkit-fill-available; height: 84.2vh; color: transparent"></iframe>
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->
		<!-- Control Sidebar -->
		<footer class="main-footer">
			<center>
				<span class="blinking">
					<p>
						<strong>Developed by Khushboo Singi,Naina Varshney,Garima Upreti,Megha Kumari(MCA 2018-2021).</strong> 
					</p> 
				</span>
			</center>
		</footer>
	</div>
	<!-- ./wrapper -->

	<!-- REQUIRED SCRIPTS -->
	<!-- jQuery -->
	<script src="../../plugins/jquery/jquery.min.js"></script>
	<!-- Bootstrap -->
	<script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- overlayScrollbars -->
	<!-- <script src="../../plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script> -->

	<script src="../../dist/js/adminlte.js"></script>
	<script>
		$(document).ready(function () {
			$.post("http://localhost:9090/BCPMS/pages/dashboard/studentdashboard.jsp", {}, function (data, status) {
				if (data !== "invalid") {
					let data1 = JSON.parse(data);
					$('#student_name').text(data1.user_name);
					if (data1.isEnrolled > 0) {
						let html = `<li id="replace1" class="nav-item">
												<div id="Sviewattendancetable.html" class="nav-link" onClick="changeContent('../../pages/tables/shortattendance.html')"
													style="cursor: pointer;" class="nav-link"><i class="nav-icon fas fa-graduation-cap"></i>
													<p>View Attendance</p>
												</div>
											</li>`
						$('#replace1').replaceWith(html);
					}
					$.post("http://localhost:9090/BCPMS/pages/common/ListPopulate.jsp", { tableName: "course_type" }, function (data1, status) {
						if (data1 !== "Not Authorized") {
							let data = JSON.parse(data1);
							if (data.length > 0) {
								data.forEach(function (object) {
									let html = `<li class="nav-item has-treeview">
																<a href="#" class="nav-link"> <i class="far fa-circle nav-icon"></i>
																	<p id="course_list">${object.course_type}<i class="right fas fa-angle-left"></i></p>
																</a>
																<ul class="nav nav-treeview">
																		<li class="nav-item">
																			<div id="#" class="nav-link" onClick="changeContent('../../pages/tables/courseList.html','course_type_list','${object.course_type}')"
																				style="cursor: pointer;" class="nav-link"><i class="far fa-dot-circle nav-icon"></i>
																				<p>Course List</p>
																			</div>
																	    </li>
																</ul>
															</li>`
									$(html).appendTo("#courseTypeList");
								})
							}
						}
					})
					if (window.location.hash === "") {
						window.location.hash = "studentContent.html";
						document.getElementById('mainIframe').setAttribute("src", "../../pages/dashboard/studentContent.html");
					}
					else {
						$(location.hash.replace("#", '')).click();
					}
				}
				else {
					alert("Unauthorized User!!");
				}
			})
		})
		function changeContent(url, keyname = "", value = "") {
			if (keyname !== "" && value !== "") {
				$.post("http://localhost:9090/BCPMS/pages/common/getSession.jsp", { key: keyname, value: value }, (data, status) => {
					if (data === "done") {
						document.getElementById('mainIframe').setAttribute("src", url);
						let url_array = url.split('/');
						window.location.hash = url_array[url_array.length - 1];
					}
				})
			}
			else {
				document.getElementById('mainIframe').setAttribute("src", url);
				let url_array = url.split('/');
				window.location.hash = url_array[url_array.length - 1];
			}
		};
	</script>
</body>

</html>