<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>BCPMS| Assign teacher</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
    <!-- icheck bootstrap -->
    <link rel="stylesheet" href="../../plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <!--  style -->
    <link rel="stylesheet" href="../../dist/css/adminlte.min.css">
</head>
<body class="hold-transition register-page">
    <div class="register-box">
        <div class="card">
           <!--card header-->
           <div class="card-header">
                <h3 class="card-title"><b>Assign New Teacher</b></h3>
          </div>
          <!-- /.card-header -->
        <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                    <div class="form-group">
                        <label>Teacher ID</label>
                        <input type="text" class="form-control" id="teacher_id" placeholder="Enter teacher id*" required>
                    </div>
                    <div class="form-group">
                        <label>Teacher Name</label>
                        <input type="text" class="form-control" id="teacher_name" disabled>
                    </div>
                    <div class="form-group">
                    	<label>Select course in which you want to enroll</label>
                  		<select class="form-control select2bs4" id="course" style="width: 100%;" required></select>
                	</div>  
                <!-- /.form-group -->
              </div>
              <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
            <!-- /.card-body -->
            <!--card footer-->
            <div class="card-footer">
                <button type="submit" class="btn btn-primary" onclick="assignTeacher()">Submit</button>
				<button type="submit" class="btn btn-default float-right">Cancel</button>
            </div>      
            <!-- /.form-box -->
        </div>
        <!-- /.card -->
    </div>
    <!-- /.register-box -->

    <!-- jQuery -->
    <script src="../../plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../dist/js/adminlte.min.js"></script>
    <script>
    $(document).ready(function()
    {
    	$.post("http://localhost:9090/BCPMS/pages/common/ListPopulate.jsp",{tableName:"course_details"},function(data,status)
    	{
    		if(data!=="invalid")
    		{
    			let data1=JSON.parse(data);
      		   	if(data1.length>0)
      			{
      			   let sel = $('#course')[0];
      			   let selectHtml=`<option selected="selected" required>Select*</option>`
    			       				$(selectHtml).appendTo(sel);
      			   data1.forEach(function(object)
      				{
      				   let course_list=`<option>${object.course_name}</option>`
                            			$(course_list).appendTo(sel);  
      			   	})  
      			} 
    		}
    	})
    	$("#teacher_id").keypress(function(event)
    	{	
    		if(event.keyCode==13)
    		{
    			$.post("http://localhost:9090/BCPMS/pages/forms/assignteacher.jsp",{run:"keypress",t_id:$("#teacher_id").val()},function(data,status)
    			{
    				if(data!=="invalid")
    				{
    					$("#teacher_name").val(data);
    				}
    				else
    				{
    					alert("Invalid Teacher_Id");
    				}
    			})
    		}
    	})
    })
    function assignTeacher()
    {
    	$.post("http://localhost:9090/BCPMS/pages/forms/assignteacher.jsp",{run:"button",t_id:$("#teacher_id").val(),
    		selected_course:$('#course').children("option:selected").val()},function(data,status)
    		{
    			if(data!=="invalid")
    			{
    				alert("Teacher is assiged to the course successfully");
    				$(':text').val("");
    			}
    			else
    			{
    				alert("Teacher cannot be assigned to the course!!");
    			}
    		})
    }
    </script>
</body>
</html>