<!DOCTYPE html>
<html style="height: auto;"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>BCPMS| AddCourse</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../../dist/css/adminlte.min.css">
   <style>
      body:not(.sidebar-mini-md) .content-wrapper, body:not(.sidebar-mini-md) .main-footer, body:not(.sidebar-mini-md) .main-header {		
	    transition: margin-left .3s ease-in-out;
	    margin-left: 0px;}
	form .error 
	{
		color: #ff0000;
	}
  </style>
</head>
<body class="hold-transition sidebar-mini">
    <!-- Site wrapper -->
    <div class="wrapper">
        <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper" style="min-height: 1246.8px;">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Add Course</h1>
          </div>   
        </div>
      </div><!-- /.container-fluid -->
    </section>
    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <!-- left column -->
    <div class="col-md-3">
    </div>
          <div class="col-md-6">
            <!-- general form elements -->
            <div class="card card-primary">
              <!-- /.card-header -->
              <!-- form start -->
               <form id="addCourse">
                        <!--card header-->
                            <div class="card-header">
                                <h3 class="card-title"><b>Add New Course</b></h3>
                      		</div>
          <!-- /.card-header -->
         <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                  <div class="form-group">
                        <label>Course Type</label>
                        <input type="text" class="form-control" id="coursetype" name="cType"  disabled>
                    </div>
                    <div class="form-group">
                        <label>Course Id</label>
                        <input type="text" class="form-control" id="courseid" placeholder="Enter course id*" name="cId" required>
                        <div id="cIdError"></div>
                    </div>
                    <div class="form-group">
                        <label>Course Name</label>
                        <input type="text" class="form-control" id="coursename" name="cName" placeholder="Enter course name*" required>
                         <div id="cNameError"></div>
                    </div>
                    <div class="form-group">
                        <label>Course Fees</label>
                        <input type="number" class="form-control" id="fees" name="cFees" placeholder="Enter course fees*" required>
                          <div id="cFeesError"></div>
                    </div>
                   <div class="form-group">
                        <label>Course Duration</label>
                        <input type="text" class="form-control" id="duration" name="cDuration" placeholder="Enter course duration*" required>
                        <div id="cDurationError"></div>
                    </div>
                <!-- /.form-group -->
              </div>
              <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
            <!-- /.card-body -->
            <!--card footer-->
            <div class="card-footer">
                <button type="submit" class="btn btn-primary">Submit</button>
				<button type="reset" class="btn btn-default float-right">Cancel</button>
            </div> 
         </form>     
            </div>
            <!-- /.card -->
          </div>
            </div>
        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </section>
       </div>
        <!-- /.content-wrapper -->
        </div>
    <!-- ./wrapper -->
    <!-- jQuery -->
    <script src="../../plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../plugins/jquery-validation/jquery.validate.min.js"></script>
	<script src="../../plugins/jquery-validation/additional-methods.min.js"></script>
    <script src="../../dist/js/adminlte.min.js"></script>
    <script src="../../dist/js/demo.js"></script>
    <script type="text/javascript">
      $(document).ready(function () 
       {
         $.validator.addMethod("courseIdValidator", function(value, element)
         {		return /^(CS)\s[0-9]{3}L{0,1}$/i.test(value);}, 'Please enter a valid course id.');
         $.validator.addMethod("courseNameValidator", function(value, element)
         {		return /^([A-Z]{1}[a-z]{1,}\s)+$/.test(value);}, 'Please enter a valid course name.First character of each word must be capitalized.');
         $.validator.addMethod("courseFeesValidator", function(value, element)
         {		return /^$[0-9]{1,}.0{2}$/.test(value);}, 'Please enter a fees.Fees must be as 123.00');
         $.validator.addMethod("courseYearValidator", function(value, element)
         {		return /^[0-9]{1}\sYear$/i.test(value);}, 'Please enter a valid course year.Eg.2000 Year');
                    // Initialize form validation on the  form.
        $('#addCourse').validate(
        {
                        // Specify validation rules 
                        // The key name on the left side is the name attribute
						// of an input field. Validation rules are defined
						// on the right side
			rules: {							  
		  				cId: {
								required: true,
								courseIdValidator: true
							},
					  cName:{
					            required:true,
					            courseNameValidator:true
					        },
				      cFees:{
				                required:true,
				               	courseFeesValidator:true
				            },
				     cDuration:
				     		{
				                required:true,
				                courseYearValidator:true
				          	}
                 },
                 // Specify validation error messages
        messages: {
                      cId: {
                            	required: "Please enter course id."
                           },
                     cName:{
                                required: "Please enter course name."
                           },
                    cFees:{
                                required: "Please enter course fees."
                           },
                    cDuration:
                           {
                                required: "Please enter duration of course."
                           } 
                  },
       errorPlacement: function(error, element) 
                 {
					if (element.attr("name") == "cId" )  //Name of input field
						error.appendTo('#cIdError');
                    if (element.attr("name") == "cName" )  
						error.appendTo('#cNameError');
                    if (element.attr("name") == "cFees" )  
						error.appendTo('#cFeesError');
                    if (element.attr("name") == "cDuration" )  
						error.appendTo('#cDurationError');
                  },
		// Make sure the form is submitted to the destination defined
		// in the "action" attribute of the form when valid
       submitHandler: function(form)
       {
		  	courseAdd();
	   }
	});
});
    </script>
    
    <script>
    var courseType=null;
    $(document).ready(()=>{
    	$.post("http://localhost:9090/BCPMS/pages/forms/sessionStorage.jsp",{getSessionKey:"course_type_list"},(data,status)=>{
    		if(data!=="invalid session key")
    		{
    			courseType=data;
    			$('#coursetype').val(data);
    		}
    	})
    })
    function courseAdd()
    {
    	$.post("http://localhost:9090/BCPMS/pages/forms/courseadd.jsp",{type:courseType,name:$('#coursename').val(),id:$('#courseid').val(),
    		fees:$('#fees').val(),duration:$('#duration').val()},(data,status)=>{
    			if(data==="inserted")
    				{
    					alert("Course added successfully");
    					$('#course_name').val("");
    					$('#course_id').val("");
    					$('#course_duration').val("");
    					$("input[type=number][name=course_fees]").val("");
    				}
    			else
    				{
    					alert("Something went wrong.Try again to add the course.");
    				}
    		})
    }
</script>
</body>
</html>
  
